buildscript {
    repositories {
        jcenter()
        mavenCentral()
        maven { url 'https://plugins.gradle.org/m2/' }
    }
    dependencies {
        classpath 'com.blackducksoftware.integration:common-gradle-plugin:0.0.+'
    }
}

plugins {
    id 'groovy'
}

publishing {
   publications {
       mavenJava(MavenPublication) {
           def artifactName = "${buildDir}/distributions/${project.name}-${project.version}.zip"
           artifact(artifactName)
       }
   }
}

version = '6.2.0-SNAPSHOT'
final String parentVersion = project.version

configure(subprojects) { project ->
    group = 'com.blackducksoftware.integration'
    version = parentVersion

    apply plugin: 'com.blackducksoftware.integration.solution'
    apply plugin: 'groovy'

    license {
        header rootProject.file('LICENSE')
    }

    dependencies {
        implementation 'com.blackducksoftware.integration:blackduck-common:42.3.0'
        implementation 'org.codehaus.groovy:groovy-all:2.4.15'

        testImplementation 'com.blackducksoftware.integration:integration-test-common:4.+'
    }
}

subprojects {
    tasks.withType(Test) {
        maxParallelForks = 4
    }
}
